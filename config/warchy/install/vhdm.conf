# Configuration file for vhdm package management
# vhdm is a VHD mount utility built from source using git-install
#
# [dependencies] section:
#   - TEMP_BUILD_DEPS: Packages needed only for building (removed after build)
#   - BUILD_DEPS: Packages needed permanently (kept after build)
#   - Only installs if not already present
#   - Preserves pre-existing packages (won't remove if already installed)
#
# [version] section:
#   - Command to get installed version (one line output)
#   - For commit-based versions: Extract 7+ character hex hash (e.g., 'ed06abf')
#   - For semantic versions: Extract version number (e.g., '1.2.3')
#   - Without this section, package will always reinstall
#
# Examples:
#   Commit hash: mytool version 2>&1 | grep -oP 'version \K[a-f0-9]+' | head -1
#   Semantic:    mytool --version 2>&1 | grep -oP 'v\K[\d.]+' | head -1

[git]
GIT_REPO=https://github.com/rjdinis-nos/vhdm.git

[dependencies]
# Temporary dependencies (installed for build, then removed)
TEMP_BUILD_DEPS=go
# Permanent dependencies (installed and kept)
BUILD_DEPS=

[env]
# No environment variables needed for vhdm

[version]
vhdm version 2>&1 | grep -oP 'version \K[a-f0-9]+' | head -1

[build]
sudo make install 2>&1 | grep -v "skipping" || true
sudo mkdir -p /etc/bash_completion.d
vhdm completion bash | sudo tee /etc/bash_completion.d/vhdm >/dev/null

[uninstall]
sudo rm -f /etc/bash_completion.d/vhdm
sudo rm -f /usr/local/bin/vhdm
