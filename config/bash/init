#!/bin/bash

# Check for first-run post-install tasks (before shell tools load)
# This block is removed by first-run.sh after initial setup completes
if [[ -f "$XDG_STATE_HOME/warchy/first-run-pending" ]]; then
    source "$WARCHY_PATH/install/post-install/first-run.sh"
fi

if command -v mise &> /dev/null; then
  eval "$(mise activate bash)"
fi

if command -v starship &> /dev/null; then
  eval "$(starship init bash)"
fi

if command -v zoxide &> /dev/null; then
  eval "$(zoxide init bash)"
fi

if command -v try &> /dev/null; then
  eval "$(try init ~/Work/tries)"
fi

if command -v uv &> /dev/null; then
  eval "$(uv generate-shell-completion bash)"
fi

if command -v fzf &> /dev/null; then
  if [[ -f /usr/share/fzf/completion.bash ]]; then
    source /usr/share/fzf/completion.bash
  fi
  if [[ -f /usr/share/fzf/key-bindings.bash ]]; then
    source /usr/share/fzf/key-bindings.bash
  fi
fi
