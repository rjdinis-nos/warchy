<div align="center">

# Warchy

```diff
+ â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘ â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘
+ â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘
+ â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘      â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘
+ â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘      â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘ 
+ â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘      â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘  â–‘â–’â–“â–ˆâ–“â–’â–‘    
+ â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘  â–‘â–’â–“â–ˆâ–“â–’â–‘    
+  â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘  â–‘â–’â–“â–ˆâ–“â–’â–‘    
```

</div>

## Why Warchy?

**Built for Linux users stranded on Windows company laptops.**

If you're a Linux enthusiast forced to use Windows for work, Warchy is your escape hatch. It's a one-line installer that delivers a fully-configured, opinionated Arch Linux environment right inside WSLâ€”no dual boot, no VM overhead, just pure Linux integrated seamlessly with Windows.

Warchy gives you:
- ðŸš€ **One-liner installation** - From zero to configured Arch in minutes
- ðŸŽ¨ **Terminal-first experience** - Rich collection of modern TUIs and CLI tools
- ðŸ”§ **Opinionated setup** - Carefully curated packages and configs so you can focus on work
- ðŸªŸ **Native WSL integration** - Seamless interop with Windows tools and filesystem
- âš¡ **Development-ready** - Docker, dev tools, and language runtimes included

Stop compromising. Get the Linux environment you deserve, even on corporate hardware.



## Requirements

### System Requirements
- **OS**: Vanilla Arch Linux (no derivatives like Manjaro, Garuda, EndeavourOS, CachyOS)
- **Architecture**: x86_64
- **State**: Fresh installation (no Gnome/KDE pre-installed)
- **Permissions**: Must NOT run as root (runs as regular user with sudo)

### Prerequisites
The installer checks for these requirements automatically via guard scripts before proceeding.

## Installation

### PowerShell WSL Installation (Recommended for Windows)

The easiest way to install Warchy on Windows is using the automated PowerShell script that creates a complete WSL distribution:

**One-Line Download and Execution:**

```powershell
Invoke-WebRequest -Uri "https://raw.githubusercontent.com/rjdinis-nos/warchy/main/New-ArchWSL.ps1" -OutFile ".\New-ArchWSL.ps1"; .\New-ArchWSL.ps1 -DistroName "linuxbox" -Username "rjdinis" -OsType "warchy" -WslBasePath "C:\WSL\VMs"
```

**Step-by-Step:**

1. Download the script:
```powershell
Invoke-WebRequest -Uri "https://raw.githubusercontent.com/rjdinis-nos/warchy/main/New-ArchWSL.ps1" -OutFile ".\New-ArchWSL.ps1"
```

2. Run the script with your desired configuration:
```powershell
.\New-ArchWSL.ps1 -DistroName "linuxbox" -Username "joe" -OsType "warchy" -WslBasePath "C:\WSL\VMs"
```

#### Mandatory Parameters

- **`-Username`** (Required)  
  The Linux username to create in the WSL distro. This user will have sudo privileges.  
  Example: `-Username "joe"`

- **`-WslBasePath`** (Required)  
  The base directory where WSL virtual machines will be stored. A subdirectory with the distro name will be created here.  
  Example: `-WslBasePath "C:\WSL\VMs"` or `-WslBasePath "D:\Development\WSL"`

#### Optional Parameters

- **`-DistroName`** (Default: `"warchy"`)  
  The name of the WSL distribution. This will also be used as the hostname.  
  Example: `-DistroName "linuxbox"`

- **`-OsType`** (Default: `"base"`)  
  The type of installation to perform:
  - `lite` - Lightweight installation without systemd
  - `base` - Standard installation with systemd enabled
  - `warchy` - Full installation with systemd and Warchy configuration
  
  Example: `-OsType "warchy"`

- **`-VHDSizeGB`** (Default: `10`)  
  The size of the virtual hard disk in gigabytes.  
  Example: `-VHDSizeGB 20`

- **`-UserPassword`** (Default: `"changeme"`)  
  The password for the created user.  
  Example: `-UserPassword "MySecurePass123"`

- **`-WarchyBranch`** (Default: `"main"`)  
  The git branch to use when cloning the Warchy repository.  
  Example: `-WarchyBranch "develop"`

- **`-WarchyPath`**  
  Path to a local Warchy directory for testing (Windows format). Useful for development.  
  Example: `-WarchyPath "C:\Projects\warchy"`

#### Usage Examples

**Create a basic WSL Arch Linux distribution:**
```powershell
.\New-ArchWSL.ps1 -Username "john" -WslBasePath "C:\WSL"
```

**Create a full Warchy distribution:**
```powershell
.\New-ArchWSL.ps1 -DistroName "devbox" -Username "developer" -OsType "warchy" -WslBasePath "D:\WSL" -VHDSizeGB 20
```

**Create using a specific Warchy branch:**
```powershell
.\New-ArchWSL.ps1 -Username "tester" -OsType "warchy" -WarchyBranch "develop" -WslBasePath "C:\WSL"
```

**Create for local development/testing:**
```powershell
.\New-ArchWSL.ps1 -Username "dev" -OsType "warchy" -WarchyPath "C:\Projects\warchy" -WslBasePath "C:\WSL"
```

**What the PowerShell script does:**
- Creates a new WSL2 Arch Linux distribution from scratch
- Configures the virtual hard disk with specified size
- Sets up systemd (for base and warchy types)
- Creates a user with sudo privileges
- Configures SSH access
- Installs and configures Warchy (for warchy type)
- Displays connection information upon completion

### Linux Bootstrap Installation

If you already have an Arch Linux WSL distribution or native installation, use the install-warchy.sh bootstrap installer to configure Warchy:

```bash
curl -LsSf https://raw.githubusercontent.com/rjdinis-nos/warchy/refs/heads/main/install.warchy.sh | sh
```

#### Custom Installation Options

You can customize the installation with environment variables:

```bash
# Install from a specific branch
WARCHY_BRANCH=develop curl -LsSf https://raw.githubusercontent.com/rjdinis-nos/warchy/refs/heads/main/install.warchy.sh | sh

# Use custom installation directory (XDG_DATA_HOME)
XDG_DATA_HOME="$HOME/custom" curl -LsSf https://raw.githubusercontent.com/rjdinis-nos/warchy/refs/heads/main/install.warchy.sh | sh
```

**What the bootstrap installer does:**
- Updates pacman and installs git if needed
- Clones the repository to `~/.local/share/warchy` (or `$XDG_DATA_HOME/warchy`)
- Optionally checks out a specific branch via `WARCHY_BRANCH`
- Automatically runs the main `install.sh` script

### Manual Installation

1. Clone the repository:
```bash
git clone https://github.com/rjdinis-nos/warchy.git ~/.local/share/warchy
cd ~/.local/share/warchy
```

2. Run the installer:
```bash
bash install/install.sh
```

### WSL Integration

**warchy-notify**
```bash
warchy-notify -t "Title" -m "Message" [options]
```

Sophisticated WSL-Windows notification bridge:
- Sends Windows 11 toast notifications from WSL
- Supports custom icons and expiration times
- Automatically mirrors icons to Windows temp directory
- Parses `/etc/wsl-distribution.conf` for distribution icons

Options:
- `-t, --title` - Notification title (required)
- `-m, --message` - Notification body (required)
- `-l, --level` - Severity: info, warn, error, critical
- `-e, --expire` - Expiration time in minutes

Example:
```bash
warchy-notify -t "Build Complete" -m "Project built successfully" -l info -e 5
```

### WSL Interop Configuration

Enable Windows interoperability in WSL:

### WSL Interop Configuration

WSL interop is automatically configured during installation via `/etc/wsl.conf`.

**Configuration includes**:
- Windows path appending
- Interop enabled
- Metadata support
- Network hostname generation


## Configuration System

Warchy includes a comprehensive configuration system for a complete development environment.

### Modular Bash Configuration

Located in `config/bash/`, the system provides:

**Core Files**:
- `rc` - Main loader sourced by `~/.bashrc`
- `shell` - Shell options and behavior
- `envs` - Environment variables (GOPATH, XDG dirs, etc.)
- `aliases` - Command aliases (eza, bat, docker shortcuts)
- `functions` - Custom shell functions
- `init` - Initialization scripts (starship, fzf)
- `keybindings` - Custom key bindings
- `inputrc` - Readline configuration

### Application Configurations

**Terminal & Display**:
- `foot/` - Wayland terminal emulator config
- `xterm/` - X11 terminal config
- `starship/` - Cross-shell prompt
- `tmux/` - Terminal multiplexer

**Development Tools**:
- `git/` - Git configuration and aliases
- `vim/` - Vim settings
- `nvim/` - Neovim with LazyVim (auto-installed)
- `npm/` - Node.js package manager

**System Services**:
- `systemd/user/` - User systemd services
- `dunst.service` - Notification daemon
- `ssh-agent.service.d/` - SSH agent overrides

**Desktop Integration**:
- `dunst/` - Notification daemon configuration
- `fastfetch/` - System information display
- `yazi/` - File manager with Catppuccin theme

All tools respect XDG directories for clean home directory.


## Contributing

Contributions are welcome! Please:

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Test on a fresh Arch installation
5. Submit a pull request

### Code Style

- Use bash strict mode: `set -eEo pipefail`
- Include descriptive comments
- Follow existing naming conventions
- Test error handling paths

## License

MIT License

See the [LICENSE](LICENSE) file for full details.

## Acknowledgments

- [omarchy](https://omarchy.org/) - Code inspiration and architectural patterns
- [gum](https://github.com/charmbracelet/gum) - Glamorous shell scripts
- [Arch Linux](https://archlinux.org/) - The base distribution
- All the amazing CLI tools included in the package lists

## Support

For issues, questions, or contributions:
- Open an issue on GitHub
- Check the installation log for detailed error information
- Review the [Arch Wiki](https://wiki.archlinux.org/) for system-specific issues

---

**Note**: This is an opinionated Arch Linux setup. Review the package lists and configurations before installation to ensure they meet your needs.

## Project Structure

```
warchy/
â”œâ”€â”€ install.sh                    # Main installation script (deprecated, use install.warchy.sh)
â”œâ”€â”€ install.warchy.sh            # Bootstrap web installer (pipe-to-shell)
â”œâ”€â”€ logo.txt                      # ASCII art logo
â”œâ”€â”€ icon.txt                      # ASCII art icon
â”œâ”€â”€ version                       # Version file
â”œâ”€â”€ New-ArchWSL.ps1              # PowerShell script for WSL setup
â”œâ”€â”€ applications/                 # Desktop application files
â”‚   â””â”€â”€ foot.desktop             # Foot terminal desktop entry
â”œâ”€â”€ bin/                          # Utility scripts and launchers
â”‚   â”œâ”€â”€ warchy-launch-tui        # TUI launcher
â”‚   â”œâ”€â”€ warchy-launcher          # Main launcher script
â”‚   â”œâ”€â”€ warchy-menu              # Interactive menu system
â”‚   â”œâ”€â”€ warchy-notify            # WSL-Windows notification bridge
â”‚   â”œâ”€â”€ warchy-run               # Application runner
â”‚   â”œâ”€â”€ warchy-shortcuts         # Keyboard shortcuts handler
â”‚   â”œâ”€â”€ apps/                    # Application wrappers
â”‚   â”‚   â”œâ”€â”€ about               # About dialog
â”‚   â”‚   â”œâ”€â”€ btop                # btop wrapper
â”‚   â”‚   â”œâ”€â”€ geminicli           # Gemini CLI wrapper
â”‚   â”‚   â””â”€â”€ htop                # htop wrapper
â”‚   â”œâ”€â”€ install/                 # Installation utilities
â”‚   â”‚   â”œâ”€â”€ warchy-install-docker
â”‚   â”‚   â”œâ”€â”€ warchy-install-gcloud
â”‚   â”‚   â”œâ”€â”€ warchy-install-go
â”‚   â”‚   â”œâ”€â”€ warchy-install-npm
â”‚   â”‚   â”œâ”€â”€ warchy-install-pnpm
â”‚   â”‚   â”œâ”€â”€ warchy-install-posting
â”‚   â”‚   â”œâ”€â”€ warchy-install-vhdm
â”‚   â”‚   â””â”€â”€ warchy-remove-go
â”‚   â””â”€â”€ utils/                   # System utilities
â”‚       â”œâ”€â”€ warchy-branch        # Show git branch
â”‚       â”œâ”€â”€ warchy-drive-info    # Drive information
â”‚       â”œâ”€â”€ warchy-drive-select  # Drive selector
â”‚       â”œâ”€â”€ warchy-icon          # Icon display
â”‚       â”œâ”€â”€ warchy-list-env-vars # List environment variables
â”‚       â”œâ”€â”€ warchy-list-path     # List PATH entries
â”‚       â”œâ”€â”€ warchy-list-shell-flags
â”‚       â”œâ”€â”€ warchy-list-shell-functions
â”‚       â”œâ”€â”€ warchy-list-shell-vars
â”‚       â”œâ”€â”€ warchy-logo          # Logo display
â”‚       â”œâ”€â”€ warchy-pacman-install # Pacman wrapper
â”‚       â”œâ”€â”€ warchy-version       # Version display
â”‚       â””â”€â”€ warchy-yay-install   # Yay AUR helper wrapper
â”œâ”€â”€ config/                       # User configuration files
â”‚   â”œâ”€â”€ bash/                    # Bash configuration
â”‚   â”‚   â”œâ”€â”€ aliases             # Shell aliases
â”‚   â”‚   â”œâ”€â”€ envs                # Environment variables
â”‚   â”‚   â”œâ”€â”€ functions           # Shell functions
â”‚   â”‚   â”œâ”€â”€ init                # Initialization
â”‚   â”‚   â”œâ”€â”€ inputrc             # Readline config
â”‚   â”‚   â”œâ”€â”€ keybindings         # Key bindings
â”‚   â”‚   â”œâ”€â”€ rc                  # Main bashrc loader
â”‚   â”‚   â””â”€â”€ shell               # Shell options
â”‚   â”œâ”€â”€ dunst/                   # Notification daemon
â”‚   â”œâ”€â”€ fastfetch/               # System info tool
â”‚   â”œâ”€â”€ foot/                    # Foot terminal emulator
â”‚   â”œâ”€â”€ git/                     # Git configuration
â”‚   â”œâ”€â”€ gnupg/                   # GPG configuration
â”‚   â”œâ”€â”€ npm/                     # NPM configuration
â”‚   â”œâ”€â”€ starship/                # Starship prompt
â”‚   â”œâ”€â”€ systemd/user/            # Systemd user services
â”‚   â”œâ”€â”€ tmux/                    # Tmux configuration
â”‚   â”œâ”€â”€ vim/                     # Vim configuration
â”‚   â”œâ”€â”€ xterm/                   # XTerm configuration
â”‚   â””â”€â”€ yazi/                    # Yazi file manager
â”œâ”€â”€ default/                      # Default system configurations
â”‚   â”œâ”€â”€ bashrc                   # Default bashrc
â”‚   â”œâ”€â”€ applications/            # Application shortcuts
â”‚   â”œâ”€â”€ nvim/                    # Neovim defaults
â”‚   â”œâ”€â”€ pacman/                  # Pacman configuration
â”‚   â”‚   â”œâ”€â”€ mirrorlist          # Mirror list
â”‚   â”‚   â””â”€â”€ pacman.conf         # Pacman config
â”‚   â”œâ”€â”€ systemd/                 # Systemd defaults
â”‚   â”‚   â””â”€â”€ journald.conf.d/    # Journal config
â”‚   â””â”€â”€ wsl/                     # WSL-specific configs
â”‚       â”œâ”€â”€ wsl-remount-rshared.service
â”‚       â”œâ”€â”€ wslg.conf
â”‚       â”œâ”€â”€ wslg.sh
â”‚       â””â”€â”€ WSLInterop.conf
â””â”€â”€ install/                      # Installation modules
    â”œâ”€â”€ install.sh               # Main installer entry point
    â”œâ”€â”€ warchy-base.packages     # Core system packages
    â”œâ”€â”€ warchy-optional.packages # Optional packages
    â”œâ”€â”€ warchy-yay.packages      # AUR packages via yay
    â”œâ”€â”€ config/                  # System configuration scripts
    â”‚   â”œâ”€â”€ config.sh           # Main configuration orchestrator
    â”‚   â”œâ”€â”€ fast-shutdown.sh    # Faster shutdown configuration
    â”‚   â”œâ”€â”€ increase-sudo-tries.sh # Sudo attempt limits
    â”‚   â”œâ”€â”€ scripts.sh          # Script deployment
    â”‚   â”œâ”€â”€ ssh-flakiness.sh    # SSH stability fixes
    â”‚   â”œâ”€â”€ systemd.sh          # Systemd configuration
    â”‚   â””â”€â”€ usb-autosuspend.sh  # USB power management
    â”œâ”€â”€ helpers/                 # Helper modules
    â”‚   â””â”€â”€ logging.sh          # Logging system
    â”œâ”€â”€ packaging/               # Package installation modules
    â”‚   â”œâ”€â”€ base.sh             # Base package installer
    â”‚   â”œâ”€â”€ gcp.sh              # Google Cloud Platform tools
    â”‚   â”œâ”€â”€ go.sh               # Golang installer
    â”‚   â”œâ”€â”€ localdb.sh          # File location database (plocate)
    â”‚   â”œâ”€â”€ optional-yay.sh     # Optional AUR packages
    â”‚   â”œâ”€â”€ optional.sh         # Optional package installer
    â”‚   â”œâ”€â”€ posting.sh          # Posting tool installer
    â”‚   â”œâ”€â”€ rust.sh             # Rust toolchain
    â”‚   â”œâ”€â”€ vhdm.sh             # VHDM installer
    â”‚   â””â”€â”€ yay.sh              # Yay AUR helper
    â”œâ”€â”€ post-install/            # Post-installation tasks
    â”‚   â”œâ”€â”€ allow-reboot.sh     # Reboot permissions
    â”‚   â”œâ”€â”€ finished.sh         # Completion screen
    â”‚   â””â”€â”€ nvim.sh             # Neovim setup
    â””â”€â”€ pre-install/             # Pre-installation checks
        â”œâ”€â”€ first-run-mode.sh   # First-run detection
        â”œâ”€â”€ guard.sh            # System compatibility checks
        â”œâ”€â”€ pacman.sh           # Pacman configuration
        â”œâ”€â”€ show-env.sh         # Environment display
        â””â”€â”€ user.sh             # User validation
```