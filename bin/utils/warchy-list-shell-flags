#!/usr/bin/env bash
# =============================================================================
# Script: show_shell_flags.sh
# Purpose: Show the current Bash shell options ($-) and explain them
# =============================================================================

# Colors for readability
CYAN="\033[1;36m"
YELLOW="\033[1;33m"
GREEN="\033[1;32m"
RED="\033[1;31m"
RESET="\033[0m"

# Check if the script is sourced
if [[ "${BASH_SOURCE[0]}" == "${0}" ]]; then
    echo -e "${RED}This script must be sourced to list shell functions!${RESET}"
    echo -e "Run it like this:"
    echo -e "  ${CYAN}source ${BASH_SOURCE[0]}${RESET}"
    exit 1
fi

# Read current shell flags
flags="$-"

echo "Current shell flags: $flags"
echo

# Function to explain each common flag
explain_flag() {
    case "$1" in
        i) echo "i : Interactive shell (user can type commands)" ;;
        h) echo "h : Remember locations of commands (hashall)" ;;
        m) echo "m : Job control enabled" ;;
        B) echo "B : Brace expansion enabled" ;;
        H) echo "H : ! style history expansion enabled" ;;
        s) echo "s : Reading commands from standard input" ;;
        u) echo "u : Treat unset variables as errors (set -u)" ;;
        x) echo "x : Print commands as executed (set -x)" ;;
        *) echo "$1 : Unknown flag" ;;
    esac
}

echo "Flag explanations:"
for ((i=0; i<${#flags}; i++)); do
    c="${flags:i:1}"
    explain_flag "$c"
done

